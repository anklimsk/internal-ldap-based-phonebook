(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.MainAppScripts=b()}}})(this,function(){var V={};var c="#content";var h="#container";var b="/cake_theme/events/ssecfg.json";var s="/cake_theme/events/tasks.json";var D="/cake_theme/events/queue";var n=null;var Q=null;var K=0;var r=5000;var x={obj:{},retries:{},noty:{},config:{},progress:{}};var L={timeout:5000,container:h};var R={parentIdStart:null,backupElement:null};function F(ad){var ac=0,Z,aa;var ab=ad.length;if(ab===0){return ac}for(Z=0;Z<ab;Z++){aa=ad.charCodeAt(Z);ac=((ac<<5)-ac)+aa;ac=(ac|0)}return ac}function C(){var Z=Math.floor(Math.random()*50)+Date.now();return Z}function v(aa){var Z="";if(aa){Z=aa+"_"}if(K===0){K=C()}Z+=K;K++;return Z}function U(){if(Q){return true}return false}function I(ad,Z,ag,aj){var ab=aj.data("fade-background");var ae=false;if(aj.attr("fade-page")){ae=true}if(Z!=="success"){V.loadIndicatorOff(ab,ae);return}var af=aj.parents(".main-app-scripts-modal");if(af.length===1){var ah=aj.attr("action");var ac=$(ad).find('form[action="'+ah+'"]');var ai=aj.data("update-modal-content");if(ac.length>0){var aa=f(ad,af);af.find(".modal-body").html(aa);V.update();V.loadIndicatorOff(ab)}else{$(c).data("update-page-after-close",true);af.data("update-modal-content",ai);af.modal("hide");V.loadIndicatorOff(ab)}}else{$(c).html(ad);V.update();V.loadIndicatorOff(ab)}}function a(ac,Z,ab,aa){var ae=aa.data("fade-background");var ad=false;if(aa.attr("fade-page")){ad=true}V.loadIndicatorOff(ae,ad);if(ac.status===403){location.reload()}}function l(Z){if(!Z){return false}var aa=$(Z);if(!aa.attr("data-onclick")){return false}var ad=aa.attr("data-onclick");if(!ad){return false}var ac=/document\.(post_[0-9a-fA-F]+)\.submit\(\).+/.exec(ad)[1];if(!ac){return false}var ae=$("#"+ac);if(ae.length!==1){return false}if(jQuery.fn.ajaxSubmit){ae.attr("data-toggle","ajax-form");V.updateAjaxForm()}var ab=aa.data("update-modal-content");ae.data("update-modal-content",ab);return ae.submit()}function k(aa){if(typeof aa==="undefined"){aa=false}var Z=0.8;if(aa){Z=1}if($("div.mainappscripts-ds-overlay").length>0){return}$('<div class="mainappscripts-ds-overlay"></div>').appendTo("body").fadeTo("fast",Z)}function W(aa){if(typeof aa==="undefined"){aa=false}var Z="mainappscripts-ds-overlay";if(aa){Z+="-higher"}$("div."+Z).fadeTo("fast",0,function(){$("div."+Z).detach()})}function P(aa,Z,ab){if((!aa)||(Z<10000)||!ab){return}$.ajax({url:aa,async:false,dataType:"html",success:function(ae,ag,ad){var ac=$(ab);if(ac.length===0){return}var af=$(ae).find(ab).addBack(ab);if(af.length!==1){return}ac.html(af.html());V.update()}})}function B(aa,ad){var Z={};if(!aa){return Z}if(!ad){ad=F(aa)}var ac="inputCountrysList"+ad;if(U()&&Q.isSet(ac)){var ab=Q.get(ac);if(ab){return ab}}$.ajax({url:aa,async:false,method:"POST",dataType:"json",global:false,success:function(ae){if(!ae){return}Z=ae;if(U()){Q.set(ac,Z)}}});return Z}function m(){if(x.config.length>0){return}var ab="SSEobjCfg";var Z={text:"Waiting to run task",label:{task:"Task",completed:"completed"},retries:100,delayDeleteTask:5};if(U()&&Q.isSet(ab)){var aa=Q.get(ab);if(aa){x.config=aa;return}}$.ajax({async:false,url:b,dataType:"json",global:false,method:"POST",success:function(ac){if(ac){Z=$.extend({},Z,ac)}if(U()){Q.set(ab,Z)}}});x.config=Z}function d(ab){var aa=null;if(typeof Noty==="undefined"){return aa}if(!ab){ab="Waiting..."}var ac={text:ab,type:"information",timeout:false,force:true,closeWith:["click"],layout:"topRight",theme:"bootstrap-v3",animation:{open:"animated bounceInRight",close:"animated bounceOutRight"}};var Z=new Noty(ac);return Z}function Y(af){var ae=$.parseJSON(af.data);var ac=ae.type;var aa=parseFloat(ae.progress);var ag=ae.msg;var ab=1000;var ad=true;var Z="";if(isNaN(aa)){aa=0}if(typeof NProgress==="undefined"){ad=false}if(ag&&(typeof ag==="string")){ag=ag.replace(/\n/g,"<br />")}if(ae.result===false){--x.retries[ac];if(x.retries[ac]>0){if(x.noty[ac]){Z=x.config.text+' "<b>'+ac+'</b>" - [<i>'+x.retries[ac]+"</i>]";x.noty[ac].setText(Z,true);if((!x.noty[ac].showing&&!x.noty[ac].shown)||x.noty[ac].closed){x.noty[ac].show()}}}else{if(x.obj[ac]){x.obj[ac].stop()}if(x.noty[ac]){x.noty[ac].close()}}}else{if(ae.result===true){if(ad){if(NProgress.status!==null){NProgress.done();setTimeout(function(){NProgress.remove()},ab)}}if(x.noty[ac]){if(aa<1){x.noty[ac].setType("error",true)}else{if(ag){x.noty[ac].setType("warning",true)}else{x.noty[ac].setType("success",true);x.noty[ac].setTimeout(30000)}}}if(x.obj[ac]){x.obj[ac].stop()}}else{if(ad){if(NProgress.status===null){NProgress.start()}if(x.progress[ac]){NProgress.set(aa)}else{NProgress.inc()}}}if(x.noty[ac]){Z=x.config.label.task+": <b>"+ac+"</b>; "+x.config.label.completed+": <i>"+parseInt((aa*100),10)+"%</i>.";if(ag){Z+='<br /><div class="sse-message">'+x.config.label.message+": <small>"+ag+".</small></div>"}x.noty[ac].setText(Z,true);if(!x.noty[ac].showing&&!x.noty[ac].shown){x.noty[ac].show()}}}}function z(ac){var ab=$(ac.target);var aa=ab.parents(".modal");if(aa.length===0){return}var Z=$('[role="tooltip"]');Z.detach();Z.appendTo(aa)}function y(ad){if(typeof $().tooltip!=="function"){return false}if(!ad){return false}var aa=$('div.tooltip.in[role="tooltip"]');if(aa.length>0){aa.removeClass("in")}var ac=$(ad);if(ac.length===0){return true}var ab=null;var Z=null;ac.each(function(ae,af){ab=$(af);if(ab.data("bs.tooltip")){return true}Z=ab.attr("data-original-title");if(Z){ab.attr("title",Z);ab.removeAttr("data-original-title")}ab.tooltip({trigger:"hover",container:c,placement:"auto",html:true}).off("inserted.bs.tooltip").on("inserted.bs.tooltip",z)});return true}function G(aa){var Z={};if(!aa){return Z}$.ajax({url:aa,async:false,method:"POST",dataType:"json",global:false,success:function(ab){if(!ab){return}Z=ab}});return Z}function M(ak){var al=$(this);var ah=al.parents('form[progressfill!=""][progressfill]').find('[role="progressbar"].inputs-filled-progress');var ag="";if(!ah){return}var ad=al.val();var ae=ah.data("total-inputs");var af=ah.data("total-required-inputs");var am=ah.data("filled-inputs");var Z=ah.data("filled-required-inputs");if(!am){am=[]}if(!Z){Z=[]}var ab=al.attr("id");if(!ab){return}var an=al.attr("required");var aa=$.inArray(ab,am);var aj=$.inArray(ab,Z);if(!ad||(ad.length===0)){if(aa!==-1){am.splice(aa,1)}if(an&&(aj!==-1)){Z.splice(aj,1)}}else{if(aa===-1){am.push(ab)}if(an&&(aj===-1)){Z.push(ab)}}ah.data("filled-inputs",am);ah.data("filled-required-inputs",Z);var ac=am.length;var ai=Z.length;var ao=0;if(ae>0){ao=Math.round(ac/ae*100)}ah.css({width:ao+"%"});ah.text(ac+" / "+ae);if(af>0){if(ai<af){ag="progress-bar-danger"}else{if((ae-af)>0){if(ac<ae){ag="progress-bar-warning"}else{ag="progress-bar-success"}}else{ag="progress-bar-success"}}}else{if(ac<ae){ag="progress-bar-warning"}else{ag="progress-bar-success"}}ag="progress-bar "+ag+" inputs-filled-progress";ah.attr("class",ag)}function H(af){var aa=null;var ab=null;var aj=null;var ag=null;var ac=$(this);var ai=ac.parents(".form-group");var ad="RequiredInputEmptyMsg";var ah="Required input is empty";var ae=ac.parents('form[requiredcheck!=""][requiredcheck]').data("required-msg");if(ae){ah=ae}if(ai.length===0){return}var Z=ac.parents(".tab-pane:eq(0)");if(Z.length===1){aa=Z.attr("id");if(aa){ab=ac.parents(".tabbable").find('ul.nav li a[href="#'+aa+'"]')}}if(ac.val()){ai.find("span#"+ad).remove();if(ai.find(".help-block").length===0){ai.removeClass("has-error")}if(ab&&(Z.find(".has-error").length===0)){aj=ab.find(".required-input-tab-icon");if(aj.length>0){ag=aj.parent();ag.children(".required-input-tab-icon").remove()}}}else{ai.addClass("has-error");if(ai.find("span#"+ad).length===0){ai.append('<span id="'+ad+'" class="help-block">'+ah+"</span>")}if(ab&&(ab.find(".required-input-tab-icon").length===0)){ab.append('<span class="required-input-tab-icon">&nbsp;<span class="fas fa-exclamation-triangle fa-lg"></span></span>')}}}function E(ae){var ac=$(this).parents('form[requiredcheck!=""][requiredcheck]').find(':input[name^="data["][required]');if(ac.length===0){return true}var ad=ac.filter(function(){return !this.value});if(ad.length===0){return true}ad.trigger("change.MainAppScripts.RequirInput");var Z=ad.eq(0);var aa=Z.closest(".tab-pane");if(aa.length===1){var ab=aa.attr("id");if(ab){Z.parents(".tabbable").find('ul.nav li a[href="#'+ab+'"]').tab("show")}}return false}function N(ab){if(!ab.result){return}var Z=this.parents("li:eq(0)");if(Z.length===0){Z=this.parents("tr:eq(0)");if(Z.length===0){return}}var ae=ab.direct;var ac=Z.index();var aa=null;var ad=0;if(typeof(ab.delta)!=="boolean"){ad=parseInt(ab.delta,10);if(isNaN(ad)){ad=0}}switch(ae){case"top":aa=0;case"up":if(aa===null){aa=ac-ad}if(Z.is(":first-child")){return}if(typeof $().tooltip==="function"){this.tooltip("hide")}Z.insertBefore(Z.siblings(":eq("+aa+")"));break;case"bottom":aa=-1;case"down":if(aa===null){aa=ac+ad-1}if(Z.is(":last-child")){return}if(typeof $().tooltip==="function"){this.tooltip("hide")}Z.insertAfter(Z.siblings(":eq("+aa+")"));break;default:return}return}function e(ae){var af=this.fadeBackground;if(!ae){V.loadIndicatorOff(af);return}if(typeof $().tooltip==="function"){this.target.tooltip("hide")}var ad=this.target.data("target-selector");var ac="";var ab=c;var Z=null;var aa=null;if(ad){ac=ad+" > *";ab+=" "+ad;Z=$(ac,ae);aa=$(".confirm-form-block > *",ae)}else{Z=$(ae)}if(Z.length>0){Z.hide().appendTo($(ab)).fadeIn("slow")}if(aa.length>0){aa.appendTo($(".confirm-form-block"))}if($(c+" .load-more").length>0){$(c+" .load-more").replaceWith($(".load-more",ae))}else{$(c+' a[data-toggle="load-more"]').replaceWith($('a[data-toggle="load-more"]',ae))}V.update();V.loadIndicatorOff(af);return}function q(ag,ab,aj){aj(ag,ab);var ac=ab.group.options.itemSelector;var ah=ab.rootGroup.options.group;var af="."+ah;var aa=ag.parents('[data-toggle="draggable"]').data("url");var ai=ag.data("id");var ae=ab.el;var Z=ae.sortable("serialize").get();var ad=ae.parent(ac).data("id");if(typeof ad==="undefined"){ad=null}var ak={target:ai,parent:ad,parentStart:R.parentIdStart,tree:JSON.stringify(Z)};var al=false;if(aa){$.ajax({async:false,url:aa,data:ak,dataType:"json",method:"POST",success:function(am){al=am.result}})}if(!al){$(af).replaceWith(R.backupElement);V.update()}}function w(ab,Z,ac){var aa=Z.group.options.itemSelector;var ad=Z.rootGroup.options.group;R.parentIdStart=ab.parents(aa).data("id");R.backupElement=$("."+ad).clone(false);ac(ab,Z)}function t(ae,ab,ag){if((typeof ae!=="object")||(ae.length===0)||!ab){return false}var Z=ae.data("url");if(!Z){return false}Z=Z.replace(/&amp;/g,"&");var ah=parseInt(ae.val(),10);if(isNaN(ah)){ah=ag}var ad=parseInt(ae.data("curr-value"),10);if(isNaN(ad)){ad=ag}if(ah===ad){return false}var af=ab+":\\d+";var ac=new RegExp(af);if(Z.search(ac)===-1){return false}af="("+ab+":)\\d+";ac=new RegExp(af,"g");var aa=Z.replace(ac,"$1"+ah);V.updatePage(aa);return true}function X(aa){var Z=$(this);t(Z,"limit",20);return false}function i(aa){aa.preventDefault();var Z=$(this).siblings(":text");t(Z,"page",1);return true}function p(){var aa="";var ad=$(this);var ac=$(ad).attr("href");var ab=$(ad).data("popover-url");var Z=$(ad).data("cached");var ae=false;if(Z){return Z}if(!ac){if(!ab){return aa}ac=ab}if(!ac.match(/\.pop$/)){ac+=".pop"}$.ajax({url:ac,dataType:"html",async:false,success:function(af){$(ad).data("cached",af);aa=af}});return aa}function S(aa){var Z='<div class="popover" role="tooltip">                    <div class="arrow"></div>                    <h3 class="popover-title"></h3>                    <div class="popover-content"></div>                </div>';var ab='<div class="popover popover-lg" role="tooltip">                    <div class="arrow"></div>                    <h3 class="popover-title"></h3>                    <div class="popover-content"></div>                </div>';if(!aa){return Z}aa=aa.toLowerCase();if(aa==="lg"){return ab}return Z}function o(){var Z=v("MainAppScriptsModal");$(c).append('<div class="main-app-scripts-modal modal fade" id="'+Z+'" tabindex="-1" role="dialog" aria-labelledby="ModalFormLabel">                    <div class="modal-dialog" role="document">                        <div class="modal-content">                            <div class="modal-header">                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title text-center">&nbsp;</h4>                            </div>                            <div class="modal-body">                            </div>                        </div>                    </div>                </div>');return Z}function f(ab,ae){if(!ab||!ae){return ab}var ad=$(ab);var ac=ad.find(".page-header").detach();if(ac.length>0){var aa=ac.find(".header");if(aa.length>0){aa.find("#pageHeaderMenu").addClass("btn-sm");aa.find('.page-header-menu a:not([role="post-link"],[data-toggle="ajax"],[data-toggle="request-only"],[skip-modal][skip-modal!=""])').attr("data-toggle","modal");ae.find(".modal-header .modal-title").html(aa.html())}}ad.find("form:not([skip-modal])").attr("data-toggle","ajax-form");var Z=$("<div />").append(ad).html();return Z}function A(ab){if($.isEmptyObject(ab)){return}var ac=$(c);if(ac.length===0){return}var Z=ac.data("stack-modal-window-info");if(!$.isArray(Z)){Z=[]}var aa={url:"",title:"",size:"",method:""};ab=$.extend({},aa,ab);Z.push(ab);ac.data("stack-modal-window-info",Z)}function J(){var aa={};var ab=$(c);if(ab.length===0){return aa}var Z=ab.data("stack-modal-window-info");if(!$.isArray(Z)||(Z.length===0)){return aa}aa=Z.pop();ab.data("stack-modal-window-info",Z);return aa}function O(aa,ag,ai,Z,ab){if(!aa){return}var ae=$(".main-app-scripts-modal");if(ae.length>0){ae.data("disable-use-stack",true);ae.modal("hide")}var ah=o();var ad=true;var ac=$("#"+ah);var af="";if(!aa.match(/\.mod$/)){aa+=".mod"}if(!Z){Z="GET"}Z=Z.toUpperCase();if(ag){ac.find(".modal-header h4").text(ag)}if(ai){ai=ai.toLowerCase();switch(ai){case"sm":af="modal-sm";break;case"lg":af="modal-lg";break;default:af="";break}if(af){ac.find(".modal-dialog").addClass(af)}}if(typeof ab==="undefined"){ab=false}if(!ac.data("disable-use-stack")){ac.data("disable-use-stack",ab)}V.loadIndicatorOn(ad);$.ajax({url:aa,method:Z,async:true,dataType:"html",success:function(am,an,al){var aj={url:aa,title:ag,size:ai,method:Z};A(aj);var ak=f(am,ac);ac.find(".modal-body").html(ak);V.update();V.loadIndicatorOff(ad);ac.modal("show");ac.off("shown.bs.modal").on("shown.bs.modal",function(){V.setInputFocus()});ac.off("hidden.bs.modal").on("hidden.bs.modal",function(at){var aq=$(this);var av=$(c);var ap=aq.data("disable-use-stack");var ao=av.data("update-page-after-close");var au=aq.data("update-modal-content");aq.remove();if(!ap){var ar=J();if(!au){ar=J()}if(!$.isEmptyObject(ar)){ao=false;O(ar.url,ar.title,ar.size,ar.method,ap)}}else{ao=false}if(ao){av.data("update-page-after-close",false);V.updatePage()}})},error:function(aj,al,ak){V.loadIndicatorOff(ad)}})}function u(ad){ad.preventDefault();var ac=$(this);var aa=$(ac).attr("href");var ae=ac.data("modal-title");var ab=ac.data("modal-size");var ag=ac.data("modal-method");var Z=false;if((ac.attr("data-toggle")==="modal")||(ac.attr("data-toggle")==="modal-popover")){Z=ac.data("disable-use-stack")}else{var af=ac.parents('[data-toggle="modal"]');if(af.length>0){Z=af.data("disable-use-stack")}}O(aa,ae,ab,ag,Z);return false}function j(){var aa=$('a[role="post-link"][onclick]');var ab=aa.length;if(ab>0){var Z=null;aa.each(function(ac,ad){Z=$(ad);Z.attr("data-onclick",Z.attr("onclick")).removeAttr("onclick")})}}function T(){if(!$("html").hasClass("fontawesome-i2svg-active")){setTimeout(T,100);return}V.processUIReadyCounter("FontAwesome")}function g(aa){if(!aa||!$.isArray(aa)||(aa.length===0)){return}var Z={data:{tasks:aa,"delete":1}};$.ajax({async:true,url:s,data:Z,dataType:"json",global:false,method:"POST",success:Z})}V.initStorage=function(){if(typeof Storages==="undefined"){return false}Q=Storages.initNamespaceStorage("main_app_srt").sessionStorage;return true};V.configPjax=function(){if(!jQuery.fn.pjax||!jQuery.support.pjax){return false}var aa=true;var Z=false;$.pjax.defaults=$.extend({},$.pjax.defaults,L);$(document).off("pjax:success").on("pjax:success",function(){V.update()});$(document).off("pjax:popstate").on("pjax:popstate",function(){Z=true});$(document).off("pjax:start").on("pjax:start",function(){V.loadIndicatorOn(aa)});$(document).off("pjax:end").on("pjax:end",function(){if(Z){Z=false;V.update()}V.loadIndicatorOff(aa)});return true};V.updateTimeago=function(Z){if(typeof Z==="undefined"){Z=false}if(!jQuery.fn.timeago){if(Z){return 0}else{return false}}var ab=$('[data-toggle="timeago"]');var ac=ab.length;if(Z){return ac}if(ac===0){return true}var aa=null;ab.each(function(ad,ae){aa=$(ae);aa.timeago();V.processUIReadyCounter("Timeago")});y('[data-toggle="timeago"][title]');return true};V.updateRepeat=function(){var ac=window.location.href;var Z='[data-toggle="repeat"]';var ad=$(Z);var aa=ad.data("repeat-time");var ab=60;if(ad.length!==1){return false}if(aa){aa=parseInt(aa,10);if(!isNaN(aa)){ab=aa}}ab*=1000;clearTimeout(n);n=setTimeout(P,ab,ac,ab,Z);return true};V.disableTransition=function(){$.support.transition=false};V.updatePage=function(ab){if(!ab){ab=window.location.href}if(!jQuery.fn.pjax||!jQuery.support.pjax){window.location.href=ab;return true}var ac={url:ab,container:h};var aa=$.extend({},ac,L);$("[data-original-title]").tooltip("hide");var Z=$(".modal");if(Z.length>0){Z.data("disable-use-stack",true);Z.modal("hide")}$.pjax(aa);return true};V.updateF5key=function(){if(!jQuery.fn.pjax||!jQuery.support.pjax){return false}$(document).off("keydown.MainAppScripts").on("keydown.MainAppScripts",function(Z){if(Z.keyCode===116){Z.preventDefault();V.updatePage()}});return true};V.updateDisabledLinks=function(){$(".disabled a, a.disabled").off("click").on("click.MainAppScripts",function(Z){Z.stopPropagation();Z.preventDefault()})};V.updateNotUsedLinks=function(){$('a[role="button"]').off("click.MainAppScripts").on("click.MainAppScripts",function(Z){Z.preventDefault()})};V.updateLightboxLinks=function(){if(!jQuery.fn.ekkoLightbox){return false}$(document).off("click.MainAppScripts").on("click.MainAppScripts",'[data-toggle="lightbox"]',function(aa){aa.preventDefault();var Z=$(this);Z.ekkoLightbox()});return true};V.updateAjaxLinks=function(){$('a[data-toggle="ajax"], [data-toggle="ajax"] a').off("click.MainAppScripts").on("click.MainAppScripts",function(aa){aa.preventDefault();var ab=true;var Z=$(this).attr("href");if(!Z){return false}else{if(Z==="#"){return true}}V.loadIndicatorOn(ab);$(c).load(Z,function(ad,ae,ac){if(ae!=="success"){V.loadIndicatorOff(ab);return}$("body").removeClass("modal-open");$(".modal-backdrop").remove();V.update();V.loadIndicatorOff(ab)})})};V.updatePjaxLinks=function(){if(!jQuery.fn.pjax||!jQuery.support.pjax){return false}$('a[data-toggle="pjax"], [data-toggle="pjax"] a').off("click.MainAppScripts").on("click.MainAppScripts",function(aa){aa.preventDefault();var Z=$(this).attr("href");if(!Z){return false}else{if(Z==="#"){return true}}V.updatePage(Z);return false});return true};V.updatePrintLinks=function(){$('[data-toggle="print"]').off("click.MainAppScripts").on("click.MainAppScripts",function(Z){Z.preventDefault();window.print()})};V.updateProgressSSElinks=function(){$('a[data-toggle="progress-sse"], [data-toggle="progress-sse"] a').off("click.MainAppScripts").on("click.MainAppScripts",function(ac){ac.preventDefault();var aa=$(this).attr("href");var ad=true;var ab=$(this).data("task-type");var Z=$(this).data("task-use-progress");if(typeof Z==="undefined"){Z=true}if(!aa){return false}else{if(aa==="#"){return true}}V.loadIndicatorOn(ad);$(c).load(aa,function(af,ag,ae){if(ag!=="success"){V.loadIndicatorOff(ad);return}V.update();V.loadIndicatorOff(ad);V.showProgressSSE(ab,Z)})})};V.updateProgressSSEtasks=function(){$.ajax({async:true,url:s,dataType:"json",global:false,method:"POST",success:function(ab){if(!ab.result||!ab.tasks){return}var aa=[];$.each(ab.tasks,function(ad,ac){V.showProgressSSE(ac,true);aa.push(ac)});if(aa.length>0){m();var Z=(x.config.delayDeleteTask*1000);setTimeout(g,Z,aa)}}})};V.updateMoveLinks=function(){$('a[data-toggle="move"]').off("click.MainAppScripts").on("click.MainAppScripts",function(ab){ab.preventDefault();var aa=$(this);var Z=aa.attr("href");if(!Z){return false}Z+=".json";$.ajax({async:true,url:Z,dataType:"json",method:"POST",context:aa,success:N})})};V.updateLoadMoreLinks=function(){$('a[data-toggle="load-more"]').off("click.MainAppScripts").on("click.MainAppScripts",function(ab){ab.preventDefault();var ac=true;var aa=$(this);var Z=aa.attr("href");if(!Z){return false}$.ajax({async:true,url:Z,dataType:"html",global:false,context:{target:aa,fadeBackground:ac},beforeSend:function(){V.loadIndicatorOn(ac)},success:e,error:function(){V.loadIndicatorOff(ac)}})})};V.updatePaginationLinks=function(){$("#numlinesbar").off("change.MainAppScripts").on("change.MainAppScripts",X);$(".btn-go-to-page").off("click.MainAppScripts").on("click.MainAppScripts",i);$("#gotopagebar").off("keyup.MainAppScripts").on("keyup.MainAppScripts",function(Z){if(Z.keyCode!==13){return}$(".btn-go-to-page").trigger("click.MainAppScripts")})};V.updateTooltips=function(){return y('[data-toggle="tooltip"], [data-toggle][title], [data-tooltip-text]')};V.updateCheckbox=function(ag){if(typeof ag==="undefined"){ag=false}var ae=null;var ah=null;var ad=null;var Z=null;var ac=null;var af=null;var aa=null;var ab=null;ae=$("label + .checkbox");ah=$("label [type=checkbox], label [type=radio]");ad=ae.length;Z=ah.length;if(ag){return ad+Z}if(ad>0){ae.each(function(ai,aj){ac=$(aj);aa=ac.prev();ab=aa.detach();ab.appendTo(ac);V.processUIReadyCounter("Checkbox")})}if(Z>0){ah.each(function(ai,aj){ac=$(aj);af=ac.parent();ab=ac.detach();ab.insertBefore(af);V.processUIReadyCounter("Checkbox")})}return true};V.updateTreeview=function(ag){if(typeof ag==="undefined"){ag=false}if(!jQuery.fn.treeview){if(ag){return 0}else{return false}}var ak=$('[data-toggle="treeview"]');var ah=ak.length;if(ag){return ah}if(ak.length===0){return true}var Z=null;var af=null;var ad=null;var ab=null;var ac=null;var aj=null;var aa=false;var ae=false;var ai=1;ak.each(function(al,am){Z=$(am);aa=false;ae=false;ai=1;aj=$(Z).data("treeview-data");if(!aj){af=$(Z).data("treeview-url");if(af){aj=G(af)}}if(!aj||(typeof aj!=="object")||(aj.length===0)){return true}ad=$(Z).data("treeview-enablelinks");if(ad){aa=true}ab=$(Z).data("treeview-showtags");if(ab){ae=true}ac=$(Z).data("treeview-levels");if(ac){ai=parseInt(ac,10);if(isNaN(ai)){ai=1}}Z.treeview({data:aj,enableLinks:aa,showBorder:false,showTags:ae,levels:ai,selectable:true,highlightSelected:false});V.processUIReadyCounter("Treeview")});return true};V.updateBonsaiTreeview=function(aa){if(typeof aa==="undefined"){aa=false}if(!jQuery.fn.bonsai){if(aa){return 0}else{return false}}var ad=$('.bonsai-treeview, [data-toggle="bonsai-treeview"] > ul, [data-toggle="bonsai-treeview"] > ol');var ae=ad.length;if(aa){return ae}if(ad.length===0){return true}var ac=null;var Z=null;var ab=true;ad.each(function(af,ag){ac=$(ag);ab=false;if((ac.parent('[data-toggle="bonsai-treeview"][data-bonsai-expand-all]').length>0)||(ac.hasClass("bonsai-expand-all"))){ab=true}Z=ac.bonsai({idAttribute:"data-id",expandAll:ab}).data("init",true).data("bonsai");V.processUIReadyCounter("BonsaiTreeview")});return true};V.updateSortable=function(){if(!jQuery.fn.sortable){return false}var an=$('[data-toggle="draggable"] > ul, [data-toggle="draggable"] > ol, [data-toggle="draggable"] > table');if(an.length===0){return true}var af="";var am="";var ab="";var ai="";var al=true;var ah=true;var ak=true;var ae=true;var ag="";var aa={handle:'[data-toggle="drag"]',delay:500,tolerance:0,distance:0,onDrop:q,onDragStart:w};var ad={};var Z={};var aj=false;var ac=null;an.each(function(ap,aq){ac=$(aq);ag=v("main-app-scripts-draggable");var ao=ac.parent().data("vertical");if(typeof(ao)==="undefined"){ao=al}var au=ac.parent().data("nested");if(typeof(au)==="undefined"){au=ah}var at=ac.parent().data("pull-placeholder");if(typeof(at)==="undefined"){at=ak}var ar=ac.parent().data("change-parent");if(typeof(ar)==="undefined"){ar=ae}aj=false;if(ac.prop("tagName").toLowerCase()==="table"){aj=true}if(aj){af="table";am="> tbody";ab="tr";ai='<tr class="placeholder"/>';au=false}else{af="ol, ul";am="";ab="li";ai='<li class="placeholder"></li>'}Z={vertical:ao,nested:au,group:ag,pullPlaceholder:at,containerSelector:af,itemPath:am,itemSelector:ab,placeholder:ai,isValidTarget:function(aw,av){if(ar){return true}var ax=aw.parent().get(0);var ay=av.el.get(0);if(ax===ay){return true}return false}};ad=$.extend({},aa,Z);ac.attr("class",ac.attr("class").replace(/\bdraggable_\d+\b/g,""));ac.addClass("draggable");ac.addClass(ag);ac.sortable("destroy").sortable(ad)});return true};V.updateDropdowns=function(){if(typeof $().dropdown!=="function"){return false}$(".dropdown-toggle").dropdown();return true};V.updateTabs=function(){if(typeof $().tab!=="function"){return false}var aa=$('[data-toggle="tab"]');if(aa.length===0){return true}aa.tab();aa.off("show.bs.tab").on("show.bs.tab",function(ac){var ab=$(ac.target).attr("href");if(ab){$("html").data("active-tab",ab)}});aa.off("shown.bs.tab").on("shown.bs.tab",function(ab){V.setInputFocus()});var Z=$("html").data("active-tab");if(Z){$('a[data-toggle="tab"][href="'+Z+'"]').tab("show")}return true};V.updateSelect=function(ag){if(typeof ag==="undefined"){ag=false}if(!jQuery.fn.selectpicker){if(ag){return 0}else{return false}}var ar=$('[data-toggle="select"]');var Z=ar.length;if(ag){return Z}if(Z===0){return true}var ad=null;var ai=null;var af=null;var at=null;var an=null;var aj=null;var ae=null;var ac=null;var ah=null;var ab=null;var al=8;var ao=false;var aq="auto";var aa=null;var ap=null;var ak=0;var am=true;if(!jQuery.fn.ajaxSelectPicker){am=false}ar.each(function(au,av){ad=$(av);if(ad.data("selectpicker")){V.processUIReadyCounter("Select");return true}ai=ad.closest("div.bootstrap-select");if(ai.length===1){af=ad.detach();af.insertAfter(ai);ai.remove()}an=ad.data("style");aj=ad.data("size");ae=ad.data("live-search");ac=ad.data("show-tick");ah=ad.data("selected-text-format");aa=ad.data("abs-ajax-url");ap=ad.data("abs-min-length");ao=false;if(ad.attr("multiple")==="multiple"){ao=true}if(typeof ae==="undefined"){ae=false;if(ad.find("option").length>al){ae=true}}if(aa&&am){ae=true}if(typeof ac==="undefined"){ac=true}if(!ah){if(ao){ah="count > 10"}else{ah="value"}}if(!aj){aj=al}if(!an){an="btn-default"}if(ao){an+=" multiple-value-select"}at=ad.attr("title");if(at){ad.removeAttr("title")}if(ap){ad.removeAttr("data-abs-min-length")}else{ap=ak}ab=ad.data("placeholder");ad.selectpicker("destroy").selectpicker({title:ab,style:an,size:aj,liveSearch:ae,showTick:ac,selectedTextFormat:ah,dropdownAlignRight:aq}).off("loaded.bs.select").on("loaded.bs.select",function(aw){V.processUIReadyCounter("Select")}).off("changed.bs.select").on("changed.bs.select",function(ax){var aw=$(ax.target).siblings("button");if(aw.length!==1){return}var ay=aw.attr("title");if(!ay){return}aw.attr("data-original-title",ay);aw.tooltip("fixTitle")});if(at){ad.siblings('button[data-toggle="dropdown"]').attr("title",at)}if(aa&&am){ad.ajaxSelectPicker({minLength:ap})}});return true};V.updateInputsFilledProgressBar=function(ad){if(typeof ad==="undefined"){ad=false}var Z='<div class="progress">                    <div class="progress-bar inputs-filled-progress" role="progressbar" aria-valuemin="0" aria-valuemax="100"></div>                </div>';var ag=$('form[progressfill!=""][progressfill]');var ae=ag.length;if(ad){return ae}var aa=null;var ab=null;var ah=0;var af=0;var ac=null;ag.each(function(ai,aj){aa=$(aj);if(aa.data("inputsFilledProgress")){V.processUIReadyCounter("InputsFilledProgressBar");return true}ab=aa.find(":input:not(:button,[type=hidden],[type=checkbox],[type=radio],[readonly])").filter('[name^="data["]');ah=ab.length;af=ab.filter("[required]").length;ac=aa.find('[role="progressbar"].inputs-filled-progress');if(ac.length===0){ac=aa.prepend(Z).find('[role="progressbar"].inputs-filled-progress')}ac.data("total-inputs",ah);ac.data("total-required-inputs",af);ab.off("change.MainAppScripts.FillProgr").on("change.MainAppScripts.FillProgr",M);ab.trigger("change.MainAppScripts.FillProgr");aa.data("inputsFilledProgress",true);V.processUIReadyCounter("InputsFilledProgressBar")});return true};V.updateRequiredInputsForm=function(){var ab=$('form[requiredcheck!=""][requiredcheck]');if(ab.length===0){return false}var aa=null;var Z=null;ab.each(function(ac,ad){aa=$(ad);Z=aa.find(':input[name^="data["][required]');Z.off("change.MainAppScripts.RequirInput").on("change.MainAppScripts.RequirInput",H);aa.find(":submit").off("click.MainAppScripts.RequirInput").on("click.MainAppScripts.RequirInput",E)});return true};V.updatePopover=function(){if(typeof $().popover!=="function"){return false}var ac=$('[data-toggle="popover"],[data-toggle="modal-popover"]');if(ac.length===0){return true}var ab=null;var ad=null;var aa=null;var Z=null;ac.each(function(ae,af){ab=$(af);ad=$(this).data("popover-title");aa=$(this).data("popover-size");Z=$(this).data("popover-placement");if(!Z){Z="right"}ab.popover({content:p,delay:{show:1000,hide:100},html:true,placement:Z,container:c,template:S(aa),title:ad,trigger:"hover"}).off("inserted.bs.popover").on("inserted.bs.popover",function(ag){z(ag);V.update()})});return true};V.updateModalLinks=function(){if(typeof $().modal!=="function"){return false}$('a[data-toggle="modal"], a[data-toggle="modal-popover"], [data-toggle="modal"] a').off("click.MainAppScripts.modal").on("click.MainAppScripts.modal",u);return true};V.updatePassField=function(){if(!jQuery.fn.CapsLockAlert){return false}$(":password").CapsLockAlert();return true};V.updateButtons=function(){$(".btn").off("mouseup.MainAppScripts").on("mouseup.MainAppScripts",function(){$(this).blur()})};V.updateSpin=function(ab){if(typeof ab==="undefined"){ab=false}if(!jQuery.fn.TouchSpin){if(ab){return 0}else{return false}}var ae=$('[data-toggle="spin"]');var af=ae.length;if(ab){return af}if(af===0){return true}var aa=true;var ad=null;var Z=null;var ac=null;ae.each(function(ao,ag){ad=$(ag);if(ad.data("spinnerid")){V.processUIReadyCounter("Spin");return true}Z=ad.closest("div.bootstrap-touchspin");if(Z.length===1){ac=ad.detach();ac.insertAfter(Z);Z.remove()}var an=ad.data("spin-initval");if(typeof an==="undefined"){an=""}var al=ad.data("spin-min");if(!al){al=0}var ar=ad.data("spin-max");if(!ar){ar=100}var ah=ad.data("spin-step");if(!ah){ah=1}var ai=ad.data("spin-decimals");if(!ai){ai=0}var aq=ad.data("spin-maxboostedstep");if(!aq){aq=10}var am=ad.data("spin-verticalbuttons");if(typeof am==="undefined"){am=aa}var ap=ad.data("spin-prefix");if(typeof ap==="undefined"){ap=""}var ak=ad.data("spin-prefix_extraclass");if(typeof ak==="undefined"){ak=""}var at=ad.data("spin-postfix");if(typeof at==="undefined"){at=""}var aj=ad.data("spin-postfix_extraclass");if(typeof aj==="undefined"){aj=""}ad.TouchSpin("destroy");ad.TouchSpin({initval:an,min:al,max:ar,step:ah,decimals:ai,maxboostedstep:aq,verticalbuttons:am,prefix:ap,prefix_extraclass:ak,postfix:at,postfix_extraclass:aj});V.processUIReadyCounter("Spin")});return true};V.updateAjaxForm=function(){if(!jQuery.fn.ajaxSubmit){return false}$('[data-toggle="ajax-form"]').off("submit.MainAppScripts").on("submit.MainAppScripts",function(Z){Z.preventDefault();$(this).ajaxSubmit({beforeSubmit:function(aa,ab,ac){var ae=true;var ad=false;if(ab.attr("fade-page")){ad=true}ab.data("fade-background",ae);V.loadIndicatorOn(ae,ad)},success:I,error:a})});return true};V.updatePjaxForm=function(){if(!jQuery.fn.pjax||!jQuery.support.pjax){return false}$(document).off("submit.MainAppScripts").on("submit.MainAppScripts",'[data-toggle="pjax-form"]',function(ac){var ae=true;var ad=false;var aa=$(this);var Z={};if(aa.attr("fade-page")){ad=true}if(this.method.toUpperCase()==="GET"){var ab=aa.attr("action");if(ab){aa.attr("action",ab.replace(/\?.*/,""))}Z.data=aa.find(":input").filter(function(){return $(this).val()!==""}).serializeArray()}V.loadIndicatorOn(ae,ad);$.pjax.submit(ac,h,Z)});return true};V.updateInputMask=function(){if(!jQuery.fn.inputmask){return false}var Z={integer:{rightAlign:false}};Inputmask.extendDefaults({clearIncomplete:true});Inputmask.extendAliases(Z);$('[data-toggle="input-mask-mask"],[data-inputmask-mask],[data-inputmask-alias]').inputmask();$('[data-toggle="input-mask-regex"],[data-inputmask-regex]').inputmask("Regex");return true};V.updateCloneDOMelements=function(){if(!jQuery.fn.cloneya){return false}var ad=$('[data-toggle="clone-target"], .clone-wrapper');if(ad.length===0){return true}var ac=null;var aa=false;var Z=1;var ab="";var ae=true;ad.each(function(af,ag){ac=$(ag);ab="after";aa=ac.data("one-clone-button");if(aa){ac.find('[data-toggle="btn-action-clone"]:first').removeClass("hidden");ac.find('[data-toggle="btn-action-clone"]:not(:first)').addClass("hidden");ac.find('[data-toggle="btn-action-delete"]:first').addClass("hidden");ac.find('[data-toggle="btn-action-delete"]:not(:first)').removeClass("hidden");ab="before"}Z=parseInt(ac.data("max-clone"),10);if(isNaN(Z)){Z=8}ac.cloneya({minimum:1,maximum:Z,cloneThis:'[data-toggle="clone-source"]',valueClone:false,dataClone:false,deepClone:false,cloneButton:'[data-toggle="btn-action-clone"]',deleteButton:'[data-toggle="btn-action-delete"]',clonePosition:ab,serializeID:true,serializeIndex:true,ignore:".exclude-clone",preserveChildCount:false}).off("before_append.cloneya.MainAppScripts").on("before_append.cloneya.MainAppScripts",function(ai,aj,ah){$(ah).find('[data-toggle="btn-action-delete"]').removeClass("hidden")}).off("after_append.cloneya.MainAppScripts").on("after_append.cloneya.MainAppScripts",function(ai,aj,ah){V.update()}).off("before_delete.cloneya.MainAppScripts").on("before_delete.cloneya.MainAppScripts",function(aj,ai,ah){if(typeof $().tooltip!=="function"){return}$(ai).find('[data-toggle="btn-action-delete"]').tooltip("destroy")}).off("after_delete.cloneya.MainAppScripts").on("after_delete.cloneya.MainAppScripts",function(aj,ai,ah){V.update()})});return true};V.updateExpandTruncatedText=function(){var ab=$('[data-toggle="collapse-text-expand"], [data-toggle="collapse-text-roll-up"]');if(ab.length===0){return true}var Z=$('.collapse-text-expanded:has([data-toggle="collapse-text-expand"], [data-toggle="collapse-text-roll-up"])');if(Z.length>0){var aa=0;Z.each(function(ac,ad){aa=$(ad).outerWidth();$(ad).css({"max-width":aa})})}ab.off("click.MainAppScripts").on("click.MainAppScripts",function(ah){ah.stopPropagation();ah.preventDefault();var ag=$(ah.currentTarget);var ad=ag.parents(".collapse-text-expanded");if(ad.length===0){return false}var ac=ag.attr("data-toggle");var af="";var ae="";switch(ac){case"collapse-text-expand":af=".collapse-text-truncated";ae=".collapse-text-original";break;case"collapse-text-roll-up":af=".collapse-text-original";ae=".collapse-text-truncated";break;default:return false}ad.children(ae).show();ad.children(af).hide();return false});return true};V.openModalWindow=function(aa,ac,ab,ad,Z){if(typeof $().modal!=="function"){return false}O(aa,ac,ab,ad,Z);return true};V.loadIndicatorOn=function(aa,Z){if(typeof aa==="undefined"){aa=false}if(typeof Z==="undefined"){Z=false}if(typeof NProgress==="undefined"){if($("div.mainappscripts-ds-loading").length>0){return}$("body").append('<div class="mainappscripts-ds-loading"></div>')}else{if(NProgress.status===null){NProgress.configure({trickle:true,showSpinner:false,minimum:0.01});NProgress.start();NProgress.inc()}}if(aa){k(Z)}};V.loadIndicatorOff=function(Z){if(typeof Z==="undefined"){Z=false}if(typeof NProgress==="undefined"){$("div.mainappscripts-ds-loading").detach()}else{if(NProgress.status!==null){NProgress.done()}}if(Z){W()}};V.ajaxIndicator=function(Z){if(typeof Z==="undefined"){Z=false}$(document).ajaxStart(function(){V.loadIndicatorOn(Z)});$(document).ajaxStop(function(){V.loadIndicatorOff(Z)})};V.updateConfirmActionLinks=function(){j();$('a[data-confirm-msg!=""][data-confirm-msg]').off("click.MainAppScripts").on("click.MainAppScripts",function(Z){Z.preventDefault();V.confirmAction(this);return true})};V.updatePostLinks=function(){j();$('a[role="post-link"]:not([data-confirm-msg])').off("click.MainAppScripts").on("click.MainAppScripts",function(Z){Z.preventDefault();l(this);return false})};V.updateRequestOnlyLinks=function(){$('a[data-toggle="request-only"]').off("click.MainAppScripts").on("click.MainAppScripts",function(ab){ab.preventDefault();var aa=$(this);var Z=aa.attr("href");var ad="GET";var ac=true;if(!Z){return false}if(aa.data("use-post-request")){ad="POST"}$.ajax({async:true,url:Z,method:ad,global:false,beforeSend:function(){V.loadIndicatorOn(ac)},success:function(){V.update()},complete:function(){V.loadIndicatorOff(ac)}})})};V.confirmAction=function(ad,ae){var af=$(ad).data("confirm-msg");var ag=$(ad).data("confirm-btn-ok");var ac=$(ad).data("confirm-btn-cancel");if(!af){af="Are you sure?"}var ab=$("html").attr("lang");if(!ab){ab="en"}var aa=function(ah){if(!ah){return false}if(ae&&$.isFunction(ae)){return ae(ad)}if(!l(ad)&&$(ad).attr("href")){var ai=$(ad).attr("href");if(ai==="#"){return false}$(c).load(ai,function(ak,al,aj){if(al==="success"){V.update()}});return false}return false};if(typeof Noty!=="undefined"){var Z=new Noty({text:af,closeWith:["button"],force:true,modal:true,layout:"center",theme:"bootstrap-v3",type:"alert",buttons:[Noty.button(ag,"btn btn-success",function(){Z.close();aa(true)},{id:"buttonOk","data-status":"ok"}),Noty.button(ac,"btn btn-danger",function(){Z.close()},{id:"buttonCancel","data-status":"cancel"})],callbacks:{onShow:function(){$("div.noty_buttons #buttonCancel",$(this.barDom)).focus()},onTemplate:function(){$("div.noty_buttons",$(this.barDom)).addClass("text-center").css("border-top","1px solid #e7e7e7");$("div.noty_buttons button",$(this.barDom)).css("margin","0 2px")}}}).show()}else{if(typeof bootbox!=="undefined"){bootbox.setLocale(ab);bootbox.confirm({size:"small",message:af,buttons:{cancel:{label:ac,className:"btn-danger",callback:function(){}},confirm:{label:ag,className:"btn-success",callback:function(){}}},callback:aa})}else{if(confirm(af)){aa(true)}}}};V.processUIReadyCounter=function(ab){var Z=$("body").data("ui-ready-controls");if(!Z){Z={Default:1}}if(!ab){ab="Default"}if(!Z.hasOwnProperty(ab)){return}if(Z[ab]===0){return}Z[ab]--;var aa=0;var ac=0;$.each(Z,function(ae,ad){aa++;if(ad===0){ac++}});if((aa===0)||(aa===ac)){W(true);if(typeof NProgress==="undefined"){return}NProgress.done();setTimeout(function(){NProgress.remove()},500)}else{if(typeof NProgress!=="undefined"){NProgress.set(ac/aa)}}};V.setUIReadyCounter=function(){var Z={Default:1};var aa=["BodyClass","Timeago","Checkbox","Treeview","BonsaiTreeview","Select","InputsFilledProgressBar","DatePicker","FlagSelect","Spin","FileUpload","FontAwesome"];$.each(aa,function(ab,ac){Z[ac]=window.MainAppScripts["update"+ac](true)});$("body").data("ui-ready-controls",Z);if((typeof NProgress!=="undefined")&&(NProgress.status===null)){NProgress.configure({trickle:false,showSpinner:false,minimum:0.01});NProgress.start()}return true};V.setInputFocus=function(){$("input[autofocus]:visible:enabled:first").focus()};V.clearInputBtn=function(){var ab=$("input:text.clear-btn");if(ab.length===0){return}var aa=null;var Z=null;ab.each(function(ac,ad){aa=$(ad);if(aa.siblings(".mainappscripts-btn-input-clear").length===0){$('<span class="mainappscripts-btn-input-clear"><span class="fas fa-times"></span></span>').insertAfter(aa)}Z=aa.siblings(".mainappscripts-btn-input-clear");if(Z.length===0){return true}aa.keyup(function(){$(this).siblings(".mainappscripts-btn-input-clear").toggle(Boolean($(this).val()))});Z.toggle(Boolean(aa.val()));Z.off("click.MainAppScripts").on("click.MainAppScripts",function(){var ae=$(this).siblings(":text");if(ae.length===0){return false}if(jQuery.fn.typeahead){ae.typeahead("val","")}else{ae.val("")}ae.last().focus();$(this).hide();return false})})};V.setTextareaLinesLimit=function(){$("textarea").keydown(function(ab){var aa=$(this).data("lines-limit");if(!aa){return true}var Z=$(this).val().split("\n").length;if(ab.keyCode===13&&Z>=aa){return false}return true})};V.updateDatePicker=function(aj){if(typeof aj==="undefined"){aj=false}if(!jQuery.fn.datetimepicker){if(aj){return 0}else{return false}}var aq=$('[data-toggle="datetimepicker"]');var ab=aq.length;if(aj){return ab}if(ab===0){return true}var af=null;var ag="date";var al=null;var ac=null;var ai=null;var ap=null;var ae=null;var ao=null;var an=null;var ah=null;var ad=null;var am=["auto","left","right"];var aa=["auto","top","bottom"];var Z=null;var ak=null;aq.each(function(ar,at){af=$(at);if(af.data("DateTimePicker")){V.processUIReadyCounter("DatePicker");return true}ap=af;ao=af.data("date-format");if(!ao){ao="YYYY-MM-DD"}an=af.data("date-locale");if(!an){an="en"}ah=af.data("icon-type");if(typeof ah==="undefined"){ah=ag}ad={horizontal:"auto",vertical:"auto"};Z=af.data("widget-position-horizontal");ak=af.data("widget-position-vertical");if(Z){Z=Z.toLowerCase();if($.inArray(Z,am)!==-1){ad.horizontal=Z}}if(ak){ak=ak.toLowerCase();if($.inArray(ak,aa)!==-1){ad.vertical=ak}}if(ah){ah=ah.toLowerCase();switch(ah){case"time":ae="fa-clock";break;case"date":default:ae="fa-calendar-alt";break}al=af.parents(".input-group");if(al.length===0){af.wrap('<div class="input-group date"></div>')}else{al.addClass("date")}ac=af.siblings(".input-group-addon.datepickerbutton");if(ac.length===0){ac=$('<span class="input-group-addon datepickerbutton"></span>');ac.append('<span class="far '+ae+'"></span>')}else{if(ac.children("."+ae+"[data-fa-i2svg],span."+ae).length===0){ac.append('<span class="far '+ae+'"></span>')}}ac.insertAfter(af);ap=af.parents(".date")}ai=ap.datetimepicker({format:ao,locale:an,showTodayButton:true,showClear:true,showClose:true,widgetPositioning:ad});ai.off("dp.show").on("dp.show",function(au){if(typeof $().tooltip!=="function"){return}$(au.target).children('[data-toggle="datetimepicker"]').tooltip("hide")});V.processUIReadyCounter("DatePicker")});return true};V.updateFlagSelect=function(ac){if(typeof ac==="undefined"){ac=false}if(!jQuery.fn.flagStrap){if(ac){return 0}else{return false}}var ae=$('[data-toggle="flag-select"]');var af=ae.length;if(ac){return af}if(af===0){return true}var aa=null;var ag=null;var ab={placeholder:false};var Z={};var ad=null;ae.each(function(ah,ai){ad=$(ai);if(ad.data("flagStrap")){V.processUIReadyCounter("FlagSelect");return true}ag=ad.attr("id");aa=ad.data("country-url");if(aa){ab.countries=B(aa,ag)}ad.empty();ad.flagStrap(ab);V.processUIReadyCounter("FlagSelect")});return true};V.processSSE=function(ad,aa,Z){if(!ad||!Z){return false}if(!jQuery.SSE){return false}var ac=D+"/"+ad+".sse";if(x.obj[ad]){return true}m();x.obj[ad]=$.SSE(ac,{options:{forceAjax:false},events:{progressBar:Z},onEnd:function(ae){x.obj[ad]=null},onError:function(ae){x.obj[ad]=null},onMessage:function(ae){}});x.retries[ad]=x.config.retries;var ab=x.config.text+"...";x.noty[ad]=d(ab);x.progress[ad]=aa;x.obj[ad].start();if(typeof NProgress!=="undefined"){NProgress.configure({trickle:false,showSpinner:false,minimum:0.01})}return true};V.showProgressSSE=function(aa,Z){V.processSSE(aa,Z,Y)};V.updateAutocomplete=function(){if(!jQuery.fn.typeahead){return false}var ak=$('[data-toggle="autocomplete"]');var aj=ak.length;if(aj===0){return true}var ae=null;var ac=null;var ad=null;var ah=null;var af=null;var aa=null;var ab=null;var ai=null;var Z=null;var ag=null;ak.each(function(al,am){ae=$(am);if(ae.data("ttTypeahead")){return true}ac=ae.closest("span.twitter-typeahead");if(ac.length===1){ad=ac.find(".tt-input").removeClass("tt-input").detach();ae=ad.insertAfter(ac);ac.remove()}ah=ae.data("autocomplete-type");af=ae.data("autocomplete-plugin");aa=ae.data("autocomplete-url");ai=ae.data("autocomplete-local");ab=parseInt(ae.data("autocomplete-min-length"),10);if(!aa&&!ai){return true}if(isNaN(ab)){ab=2}ag={datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10};if(ai){ag.local=ai}else{ag.remote={url:aa,rateLimitBy:"debounce",rateLimitWait:750,prepare:function(ap,ao){var an=$('[data-toggle="autocomplete"]:focus').data("autocomplete-type");ao.method="POST";ao.data={query:ap,type:an,plugin:af};return ao}}}Z=new Bloodhound(ag);ae.typeahead({minLength:ab,highlight:true,hint:true},{name:"autocomplete-data",source:Z})});return true};V.updateTextcomplete=function(){if(typeof Textcomplete==="undefined"){return false}var ad=$('[data-toggle="textcomplete"]');var af=ad.length;if(af===0){return true}var Z=Textcomplete.editors.Textarea;var ac=null;var aa=null;var ae=null;var ab=[];ad.each(function(ag,ah){ac=$(ah);ab=ac.data("textcomplete-strategies");if(!ab||(typeof ab!=="object")){return true}$.each(ab,function(ai,aj){$.each(aj,function(al,ak){switch(al){case"match":aj[al]=new RegExp(ak,"i");break;case"replace":aj[al]=new Function("value",ak);break;case"search":aj[al]=new Function("term","callback",ak);break;case"ajaxOptions":if(!ak||(typeof ak!=="object")||!ak.hasOwnProperty("url")||!ak.hasOwnProperty("data")||(typeof ak.data!=="object")){return true}if(!ak.hasOwnProperty("method")){ak.method="POST"}aj.search=function(am,an){ak.data.query=am;ak.dataType="json";$.ajax(ak).done(function(ao){an(ao)}).fail(function(){an([])})};delete aj[al];break}});if(!aj.hasOwnProperty("cache")){aj.cache=true}});aa=new Z(ah);ae=new Textcomplete(aa);ae.register(ab)});return true};V.updateFileUpload=function(ai){if(typeof ai==="undefined"){ai=false}if(!jQuery.fn.fileupload){if(ai){return 0}else{return false}}var al=$('[data-toggle="fileupload"]');var aj=al.length;if(ai){return aj}if(aj===0){return true}var af=null;var ae=null;var an=null;var am=null;var ab=null;var ah=null;var Z=null;var ac=null;var aa=null;var ad=null;var ak=null;var ag=true;al.each(function(ao,ap){af=$(ap);if(af.data("blueimpFileupload")){V.processUIReadyCounter("FileUpload");return true}ae=af.closest("span.btn");if(ae.length===1){ae.siblings(".files").empty();ae.siblings(".progress").children(".progress-bar").css("width",0)}an=af.data("fileupload-url");if(!an){V.processUIReadyCounter("FileUpload");return true}am=af.data("fileupload-acceptfiletypes");if(am){am=new RegExp(am,"i")}ab=af.data("fileupload-btntext-upload");if(!ab){ab="Upload"}ah=af.data("fileupload-btntext-abort");if(!ah){ah="Abort"}Z=af.data("fileupload-msgtext-processing");if(!Z){Z="Processing..."}ac=af.data("fileupload-msgtext-error");if(!ac){ac="File upload failed."}aa=null;if(!$.support.fileInput){aa="disabled"}ad=parseInt(af.data("fileupload-maxfilesize"),10);if(isNaN(ad)){ad=null}ak=$("<button/>").addClass("btn btn-primary").prop("disabled",true).text(Z).on("click.MainAppScripts",function(){var ar=$(this),aq=ar.data();ar.off("click.MainAppScripts").text(ah).on("click.MainAppScripts",function(){ar.remove();aq.abort()});aq.submit().always(function(){ar.remove()});return false});af.fileupload({url:an,dataType:"json",acceptFileTypes:am,maxFileSize:ad,autoUpload:false,previewMaxWidth:100,previewMaxHeight:100,previewCrop:true}).on("fileuploadsubmit",function(ar,aq){V.loadIndicatorOn(ag)}).on("fileuploadadd",function(au,at){var aq=$(au.target).data("files-id");if(aq){at.context=$("#"+aq).html("<div/>")}else{at.context=$("div.files:eq(0)").html("<div/>")}var ar=null;$.each(at.files,function(av,aw){ar=$("<p/>").append($("<span/>").text(aw.name));if(!av){ar.append("<br>").append(ak.clone(true).data(at))}ar.appendTo(at.context)})}).on("fileuploadprocessalways",function(av,au){var aq=au.index,ar=au.files[aq],at=$(au.context.children()[aq]);if(ar.preview){at.prepend("<br>").prepend(ar.preview)}if(ar.error){at.append("<br>").append($('<span class="text-danger"/>').text(ar.error))}if(aq+1===au.files.length){au.context.find("button").text(ab).prop("disabled",!!au.files.error)}}).on("fileuploadprogressall",function(at,ar){var aq=parseInt((ar.loaded/ar.total*100),10);if(isNaN(aq)){aq=0}var au=$(at.target).data("progress-id");if(au){$("#"+au+" .progress-bar").css("width",aq+"%")}}).on("fileuploaddone",function(au,at){var aq=true;$.each(at.result.files,function(aw,ax){if(ax.error){aq=false}if(ax.url){var ay=$("<a>").attr("target","_blank").prop("href",ax.url);$(at.context.children()[aw]).wrap(ay)}else{if(ax.error){var av=$('<span class="text-danger"/>').text(ax.error);$(at.context.children()[aw]).append("<br>").append(av)}}});if(aq){var ar=af.data("fileupload-redirecturl");if(!ar){ar=window.location.href}V.updatePage(ar)}V.loadIndicatorOff(ag)}).on("fileuploadfail",function(ar,aq){$.each(aq.files,function(au){var at=$('<span class="text-danger"/>').text(ac);$(aq.context.children()[au]).append("<br>").append(at)});V.loadIndicatorOff(ag)}).prop("disabled",!$.support.fileInput).parent().addClass(aa);V.processUIReadyCounter("FileUpload")});return true};V.updateFontAwesome=function(Z){if(typeof Z==="undefined"){Z=false}if(typeof FontAwesome==="undefined"){if(Z){return 0}else{return false}}if(Z){return 1}T();return true};V.updateToggleIcons=function(){$('[data-toggle-icons!=""][data-toggle-icons]').off("click.MainAppScripts").on("click.MainAppScripts",function(ab){var aa=$(ab.target);var Z=aa.data("toggle-icons").split(",");if(Z.length!==2){return true}aa.find("[data-fa-i2svg]").toggleClass(Z[0]).toggleClass(Z[1]);return true})};V.updateBodyClass=function(ab){if(typeof ab==="undefined"){ab=false}var aa=$("body");if(aa.length===0){if(ab){return 0}else{return false}}if(ab){return 1}var Z="";var ac=$("#header");if(ac.length===0){return true}if(ac.find('[role="navigation"]').length===1){Z="use-navbar-only";if(ac.find(".breadcrumb").length===1){Z="use-navbar-breadcrumb"}}else{if(ac.find(".breadcrumb").length===1){Z="use-breadcrumb-only"}}if(Z){aa.addClass(Z)}V.processUIReadyCounter("BodyClass");return true};V.scrollUpBtn=function(){if(!jQuery.fn.scrollUp){return false}$.scrollUp({animation:"fade",scrollImg:true});return true};V.update=function(){$(document).trigger("MainAppScripts:update")};return V});$(function(){MainAppScripts.initStorage()});(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.ViewExtension=b()}}})(this,function(){var c={};var e=10;function d(j,k){var m=j.length;for(var l=0;l<m;l++){if(j[l]===k){return true}}return false}function h(k){var j=[];var m=k.length;for(var l=0;l<m;l++){if(!d(j,k[l])){j.push(k[l])}}return j}function a(){return e}function g(m){var n=m.attr("type");var j="";switch(n){case"radio":case"checkbox":var p=m.is(":checked");if(!p){return j}j=m.val();break;case"hidden":j="";break;default:var k=m.prop("tagName").toLowerCase();switch(k){case"select":var l=m.children("option:selected");var o=null;var i=[];var q=null;$.each(l,function(r,s){q=$(s);o=q.val();if(o){i.push(q.text())}});if(i.length>0){j=i.join(", ")}break;case"input":j=m.val();break;default:j="";break}break}return j}function b(){var s="";var l=$(".filter-form :input:not(.filter-condition)");if(l.length===0){return s}var q=[];var o=null;var z=null;var m=null;var y="";var p=null;var u=null;var k=null;var w=null;var r=null;var x=null;var t=false;var i=[];var v=[];var n=a();var j=null;$.each(l,function(A,D){y="";o=$(D);z=o.attr("name");if(!z){return true}m=o.prop("tagName").toLowerCase();if(((z.length>2)&&(z.substr(-2)==="[]"))||((m==="select")&&(o.prop("multiple")))){t=true}i=[];if(t){if($.inArray(z,v)!==-1){return true}j=$('.filter-form :input[name="'+z+'"]');$.each(j,function(E,G){var F=$(G);var H=g(F);if(H){if(i.length>n){return true}else{if(i.length===n){i.push("...");return true}else{i.push(H)}}}});i=h(i);var C=i.join(", ");if(C){y="[ "+C+" ]"}v.push(z)}else{y=g(o)}if(!y){return true}u="=";w=o.parents(".form-group").find("button.btn-filter-condition").text();if(w){u=w}r=o.data("filter-label");if(r){k=r}else{var B=o.parents("th").index();if(B===-1){B=o.parents("td").index()}if(B!==-1){r=o.parents("table").find("thead > tr:eq(0) > th:eq("+B+")").text();if(r){k=r}}}if(o.attr("data-toggle")==="autocomplete"){y="*"+y+"*"}q.push(k+" "+$.trim(u)+" "+y)});x=$('[name="data[FilterCond][group]"]:first').parents(".btn-group").children('button[data-toggle="dropdown"]').text();if(!x){x="&&"}x=" "+$.trim(x)+" ";q=h(q);s=q.join(x);return s}function f(j){if(!j){return}var i=j.find('input.filter-condition[type="radio"][value=""]');if(i.length===0){return}i.trigger("click")}c.updateFilterForm=function(){var i=$("form.filter-form");if(i.length===0){return true}i.off("reset.ViewExtension").on("reset.ViewExtension",function(l){var k=$(this);k.clearForm();$("select",this).val("");$('[data-toggle="select"]',this).selectpicker("refresh");var j=k.data("toggle");if(j==="ajax-form"){if(!jQuery.fn.ajaxSubmit){return true}}else{if(j==="pjax-form"){if(!jQuery.fn.pjax||!jQuery.support.pjax){return true}}}k.trigger("submit");return false});return true};c.updateCloneFilterRow=function(){if(!jQuery.fn.cloneya){return false}var i=($('[data-toggle="clone-target"],.clone-wrapper'));if(i.length===0){return true}i.off("after_append.cloneya.ViewExtension").on("after_append.cloneya.ViewExtension",function(k,l,j){f(j)}).off("after_delete.cloneya.ViewExtension").on("after_delete.cloneya.ViewExtension",function(k,l,j){c.setConditiosText()});return true};c.setConditiosText=function(){var k=$('[data-toggle="filter-conditions"]');if(k.length===0){return false}var j=b();if(!j){j=k.data("empty-text")}var i=k.html();if(j!==i){k.html(j)}return true};c.updateFilterInput=function(){$(".filter-form :input").off("keydown.ViewExtension").on("keydown.ViewExtension",function(i){c.setConditiosText()});$(".filter-form :input").off("paste.ViewExtension").on("paste.ViewExtension",function(i){c.setConditiosText()});$(".filter-form :input").off("input.ViewExtension").on("input.ViewExtension",function(i){c.setConditiosText()});$(".filter-form :input").off("blur.ViewExtension").on("blur.ViewExtension",function(i){c.setConditiosText()});$(".filter-form :input").off("change.ViewExtension").on("change.ViewExtension",function(i){setTimeout(function(){c.setConditiosText()},0)});$('.filter-form :input[data-toggle="datetimepicker"]').off("dp.change.ViewExtension").on("dp.change.ViewExtension",function(i){c.setConditiosText()})};c.updateSelectAllBtn=function(){$('[data-toggle="btn-action-select-all"]').off("click.ViewExtension").on("click.ViewExtension",function(j){j.preventDefault();var i=$(this).data("select-state");if(typeof i==="undefined"){i=true}$(this).data("select-state",!i);$(".filter-form tr [type=checkbox]").prop("checked",i).trigger("change")})};c.updateGroupActionBtn=function(){$('.filter-form button[name="data[FilterAction]"][value="group-action"]').off("click.ViewExtension").on("click.ViewExtension",function(n){n.preventDefault();var p=$(this).data("dialog-title");var l=$(this).data("dialog-btn-ok");var t=$(this).data("dialog-btn-cancel");var r=$(this).data("dialog-sel-placeholder");var k=$(this).data("dialog-sel-options");if(!p){p="Select"}if((typeof k!=="object")||(k.length===0)){$(this).prop("disabled",true);return false}if(typeof Noty!=="undefined"){var i=new Noty({text:"",closeWith:["button"],force:true,modal:true,layout:"center",theme:"bootstrap-v3",type:"alert",buttons:[Noty.button(l,"btn btn-warning",function(){var u=$("div.noty_body #selectTaskInputDialog").val();i.close();if(u){$('.filter-form input[name="data[FilterGroup][action]"]').val(u);$(n.target).trigger("submit")}},{id:"buttonOk","data-status":"ok"}),Noty.button(t,"btn btn-default",function(){i.close()},{id:"buttonCancel","data-status":"cancel"})],callbacks:{beforeShow:function(){var u=$('<select id="selectTaskInputDialog" data-toggle="select"/>');$("<option />",{value:"",text:r}).appendTo(u);$(k).each(function(){$("<option />",{value:this.value,text:this.text}).appendTo(u)});var v=$('<div class="form-group" />').append('<label for="selectTaskInputDialog" class="control-label">'+r+"</label>");v.append(u);this.setText(v.html(),true)},onShow:function(){$("div.noty_buttons #buttonCancel",$(this.barDom)).focus();var u=$("#selectTaskInputDialog",$(this.barDom));u.off("change.ViewExtension").on("change.ViewExtension",function(w){var v=true;if($(this).val()){v=false}$(this).parents("div.noty_bar").find("div.noty_buttons #buttonOk").prop("disabled",v)});u.trigger("change");if(typeof MainAppScripts!=="undefined"){MainAppScripts.updateSelect()}},onTemplate:function(){$("div.noty_buttons",$(this.barDom)).addClass("text-center").css("border-top","1px solid #e7e7e7");$("div.noty_buttons button",$(this.barDom)).css("margin","0 2px");$(this.barDom).css("overflow","visible")}}}).show()}else{if(typeof bootbox!=="undefined"){var q=$("html").attr("lang");if(!q){q="en"}bootbox.setLocale(q);var o=bootbox.prompt({size:"small",title:p,buttons:{cancel:{label:t,className:"btn-default"},confirm:{label:l,className:"btn-warning"}},inputType:"select",inputOptions:k,callback:function(u){if(!u){return}$('.filter-form input[name="data[FilterGroup][action]"]').val(u);$(n.target).trigger("submit")}});o.init(function(){var u=$(".modal-body .bootbox-input-select");if(u.length===0){return}u.off("change.ViewExtension").on("change.ViewExtension",function(w){var v=true;if($(this).val()){v=false}$('.modal-footer button[data-bb-handler="confirm"]').prop("disabled",v)});u.trigger("change");if(typeof MainAppScripts!=="undefined"){MainAppScripts.updateSelect()}})}else{var m="";$.each(k,function(v,u){if(m){m+=" "}m+=(v+1)+". "+u.text+" - "+u.value+"."});p+=" ["+m+"]";var j="";var s=0;do{j=prompt(p);s=parseInt(j,10);if(j===null){s=-1;break}else{if(isNaN(s)){continue}}s--;if(typeof k[s]!=="undefined"){break}}while(true);if(s>=0){$('.filter-form input[name="data[FilterGroup][action]"]').val(k[s].value);$(n.target).trigger("submit")}}}return false})};return c});$(function(){$(document).off("MainAppScripts:update.ViewExtension").on("MainAppScripts:update.ViewExtension",function(){ViewExtension.updateFilterForm();ViewExtension.updateCloneFilterRow();ViewExtension.updateFilterInput();ViewExtension.updateSelectAllBtn();ViewExtension.updateGroupActionBtn();ViewExtension.setConditiosText()})});$(function(){$(document).off("MainAppScripts:update.ErrorLayout").on("MainAppScripts:update.ErrorLayout",function(){MainAppScripts.setUIReadyCounter();MainAppScripts.updateBodyClass();MainAppScripts.updateFontAwesome();MainAppScripts.updateTooltips();MainAppScripts.processUIReadyCounter()});MainAppScripts.update()});