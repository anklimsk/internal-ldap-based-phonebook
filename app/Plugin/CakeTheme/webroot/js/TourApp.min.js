(function(a,b){if(typeof define==="function"&&define.amd){define(b)}else{if(typeof exports==="object"){module.exports=b()}else{a.TourApplication=b()}}})(this,function(){var i={};var c=10000;var e="/cake_theme/tours/steps.json";var d=null;var a=null;function f(){if(a){return true}return false}function b(j){if(!j){return j}var l=["onShow","onShown","onHide","onHidden","onNext","onPrev"];var k=j.length;$.each(j,function(n,m){m.pageNum=(n+1)+"/"+k;$.each(l,function(o,p){if(m.hasOwnProperty(p)){m[p]=new Function("tour",m[p])}})});return j}function h(k){var m="Steps";var j=[];if(f()&&a.isSet(m)){var l=a.get(m);if(l){j=l}}else{if(k||(!k&&!f())){$.ajax({async:false,url:e,dataType:"json",method:"POST",success:function(n){if(!n){return}j=n;if(f()){a.set(m,j)}}})}else{return j}}return j}function g(){d.goTo(0);if(d.ended()){d.restart()}else{d.start(true)}}i.initStorage=function(){if(typeof Storages==="undefined"){return false}a=Storages.initNamespaceStorage("tour_app").sessionStorage;return true};i.initTourApp=function(k){if(typeof Tour==="undefined"){return false}if(d){return true}var j=h(k);if(j.length===0){return false}j=b(j);d=new Tour({steps:j,duration:c,template:function(l,o){var p=o.pageNum;var m="";if(p){m="<samp>["+p+"]</samp>"}var n='<div class="popover" role="tooltip">                            <div class="arrow"></div>                            <h3 class="popover-title"></h3>                            <div class="popover-content"></div>                            <div class="popover-navigation text-center">                                <div class="btn-group pull-left">                                    <button class="btn btn-sm btn-default" data-role="prev">                                        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>                                    </button>                                    <button class="btn btn-sm btn-default" data-role="next">                                        <span class="glyphicon glyphicon-chevron-right"></span>                                    </button>                                    <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-class="glyphicon glyphicon-pause" data-resume-class="glyphicon glyphicon-play">                                        <span class="glyphicon glyphicon-pause"></span>                                    </button>                                </div>                                <span class="tour-info">'+m+'</span>                                <button class="btn btn-sm btn-default" data-role="end">                                    <span class="glyphicon glyphicon-remove"></span>                                </button>                            </div>                        </div>';return n},onShown:function(n){var m=this.title;var o=this.id;var l=$("#"+o);l.find("h3.popover-title").html(m)},onPause:function(n){var p=this.id;var l=$("#"+p);var m=l.find('button[data-role="pause-resume"]');var o=m.data("resume-class");m.find("span").attr("class",o)},onResume:function(o){var p=this.id;var l=$("#"+p);var n=l.find('button[data-role="pause-resume"]');var m=n.data("pause-class");n.find("span").attr("class",m)}});d.init();return true};i.updateTourApplication=function(){$('[data-toggle="start-app-tour"]').off("click.TourApplication").on("click.TourApplication",function(j){j.preventDefault();if(!i.initTourApp(true)){return}g()})};return i});$(function(){TourApplication.initStorage();TourApplication.initTourApp(false);$(document).off("MainAppScripts:update.TourApplication").on("MainAppScripts:update.TourApplication",function(){TourApplication.updateTourApplication()})});